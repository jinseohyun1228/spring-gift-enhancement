# spring-gift-wishlist

`🎯 유효성 검사를 실시하자`

***

## 기능 요구 사항
>- 상품 이름은 공백을 포함하여 최대 15자까지 입력할 수 있다.   
>- 가능한 특수 문자 : ( ), [ ], +, -, &, /, _ 
>    그 외 특수 문자 사용 불가    
>- "카카오"가 포함된 문구는 담당 MD와 협의한 경우에만 사용할 수 있다.

결국 _"유효성 검사를 실시하고 적절한 위치를 찾는 것"_ 을 배우는 게 이번 과제의 뜻이겠지??


***
## 유효성 검사를 어디서 실시할까?
```이유없이 쓰지말자. 이유를 생각하자 ```

나는 서비스 단에서 유효성 검사 객체 메서드를 호출하는 방식을 선택하였다.   

- 컨트롤러에서는 적절하지 않다.
  * 컨트롤러는 클라이언트의 요청을 받고 서버의 응답을 전달하는 부분이디 때문이다.
- 서비스 로직 내에서 구현한다면 코드 분리가 안되고, 가독성이 낮아진다.
  * 그렇다고 로직내에 직접 구현다면 가독성이 낮아지고 변경이 어려워진다.
- 서비스에서 컨트롤러에게 주기 위한 좋은 방법은?
  * dto를 이용하자.   
    (`아니 그러면 dto에 담을 때 유효성 검사를 하는게 좋지 않아??`)


>`서비스단에서 메서드 호출?` vs `dto에 담을 때 내부에서 메서드 호출?`
>- dto에 담으면, 초기화 생성자를 이용할 수 있으니까 간단할 것같다.    
>또한 서비스단에서는 전달받은 데이터의 안정성이 보장되니까 좋을 것 같다.   
>   
>그렇지만, 그러면 테스트 코드 작성하기 어려워지고, dto는 이 처음 컨트롤러에서 서비스 단에게 넘겨줄때 말고도 이후에 사용될 수 있는데 특별한 로직을 가지면 범용성이 줄어들기 때문에 안좋을 것 같다.

### 현재 구조와 변경 구조
```text
  컨트롤러  --- 레파지토리 --- 데이터베이스(h2)
      |          
 응답객체매퍼  
```

### 변경 구조
```text
  컨트롤러  --- 서비스 --- 레파지토리 --- 데이터베이스(h2)
                   \    
    응답객체매퍼(?)    유효성검사객체
```

## 구현 예정 목록
1. 서비스 단 구현 ✔️
2. 유효성 검사 객체 구현 ✔️ 
3. 서비스 단에서 유효성 검사 객체를 사용 ✔️
4. 예외 클래스 작성
5. 예외 발생시 처리하는 `@ControllerAdvice` 만들기




